<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Render order</title>
    <link rel="preload" as="style" href="https://dev.jspm.io/npm:highlight.js@10.1.2/styles/monokai-sublime.css">
    <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=PT+Serif:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap">
    <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=PT+Mono&amp;display=swap">
    <link rel="stylesheet" href="/styles.css">
    <link href="/favicon-32x32.png" rel="icon" type="image/png" sizes="32x32">
    <meta name="description" content="Configure the rendering order of the pages">
    <meta property="og:image" content="http://localhost/lume.png">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:url" content="http://localhost/">
    <meta name="twitter:title" content="Render order">
    <meta name="twitter:description" content="Configure the rendering order of the pages">
    <meta name="twitter:image" content="http://localhost/lume.png">
    <meta name="twitter:creator" content="@misteroom">
    <script src="/js/scripts.js" type="module"></script>
  </head>

  <body class="ly-main">
    
<nav class="navbar ly-navbar">
  <button class="menu-button" type="button" id="menu-button">Menu</button>

  <a href="/" class="logo navbar-logo">
    <img src="/logo.svg" width="64" height="64" alt="Lume logotype">
    <strong class="logo-name">Lume</strong>
    <em class="logo-description">SSG for Deno</em>
  </a>

  <ul class="navbar-links">
    <li class="has-separator not-mobile">
      <a href="">
        </a><a href="https://deno.land/x/lume@v0.22.3/" class="navbar-version">Last version <strong>v0.22.3</strong></a>
      
    </li>

    <li>
      <a href="https://github.com/lumeland/lume">
        <svg role="img" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg>
      </a>
    </li>
    <li>
      <a href="https://discord.gg/YbTmpACHWB">
        <svg role="img" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Discord</title><path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"></path></svg>
      </a>
    </li>
  </ul>
</nav>

<nav class="menu ly-menu scrollbar">
  <ul class="menu-links">
    
    <li>
      <strong>Getting started</strong>
      <ul>
      
        <li>
          
          <a href="/getting-started/overview/" title="About Lume">Overview</a>
          
        </li>
      
        <li>
          
          <a href="/getting-started/installation/" title="Installing Lume">Installation</a>
          
        </li>
      
        <li>
          
          <a href="/getting-started/command-line/" title="Using Lume on the command line">Command line usage</a>
          
        </li>
      
        <li>
          
          <a href="/getting-started/config-file/" title="Configuring Lume">Configuration</a>
          
        </li>
      
      </ul>
    </li>
    
    <li>
      <strong>Creating pages</strong>
      <ul>
      
        <li>
          
          <a href="/creating-pages/page-files/" title="How Lume will output files based on the sites file structure">Page files</a>
          
        </li>
      
        <li>
          
          <a href="/creating-pages/page-data/" title="Page data with Lume">Page data</a>
          
        </li>
      
        <li>
          
          <a href="/creating-pages/urls/" title="How define the output filename">URLs</a>
          
        </li>
      
        <li>
          
          <a href="/creating-pages/data/" title="Adding special data in the config">Extra data</a>
          
        </li>
      
        <li>
          
          <a href="/creating-pages/shared-data/" title="Creating shared data that can be used between different pages">Shared data</a>
          
        </li>
      
        <li>
          
          <a href="/creating-pages/layouts/" title="Using layouts in Lume">Layouts</a>
          
        </li>
      
        <li>
          
          <a href="/creating-pages/filters/" title="Adding filters in the config file">Filters</a>
          
        </li>
      
        <li>
          
          <a href="/creating-pages/tags/" title="Grouping pages with tags">Tags</a>
          
        </li>
      
        <li>
          
          <a href="/creating-pages/searching/" title="Using the search helper">Search and collecting</a>
          
        </li>
      
        <li>
          
          <a href="/creating-pages/pagination/" title="Pagination in Lume">Pagination</a>
          
        </li>
      
      </ul>
    </li>
    
    <li>
      <strong>Plugins</strong>
      <ul>
      
        <li>
          
          <a href="/plugins/about-plugins/" title="">About plugins</a>
          
        </li>
      
        <li>
          
          <a href="/plugins/attributes/" title="To manage attributes and class names of HTML elements">Attributes</a>
          
        </li>
      
        <li>
          
          <a href="/plugins/base-path/" title="Add automatically a base path to all urls">Base path</a>
          
        </li>
      
        <li>
          
          <a href="/plugins/bundler/" title="Enabling the bundler plugin">Bundler</a>
          
        </li>
      
        <li>
          
          <a href="/plugins/code-highlight/" title="Syntax highlighting">Code Highlight</a>
          
        </li>
      
        <li>
          
          <a href="/plugins/date/" title="To manipulate date &amp; time values in different locales">Date</a>
          
        </li>
      
        <li>
          
          <a href="/plugins/eta/" title="">Eta</a>
          
        </li>
      
        <li>
          
          <a href="/plugins/inline/" title="Using the inline plugin to inline sources">Inline</a>
          
        </li>
      
        <li>
          
          <a href="/plugins/json/" title="Using the JSON plugin to allow using JSON for data">JSON</a>
          
        </li>
      
        <li>
          
          <a href="/plugins/jsx/" title="Using JSX for templates">JSX</a>
          
        </li>
      
        <li>
          
          <a href="/plugins/markdown/" title="Using the Markdown plugin">Markdown</a>
          
        </li>
      
        <li>
          
          <a href="/plugins/modules/" title="Using JS/TS files for data, pages, and layouts">Modules</a>
          
        </li>
      
        <li>
          
          <a href="/plugins/nunjucks/" title="Using Nunjucks for pages and layouts">Nunjucks</a>
          
        </li>
      
        <li>
          
          <a href="/plugins/postcss/" title="Using the PostCSS plugin to transform CSS">PostCSS</a>
          
        </li>
      
        <li>
          
          <a href="/plugins/pug/" title="Using Pug to create pages and layouts">Pug</a>
          
        </li>
      
        <li>
          
          <a href="/plugins/relative-urls/" title="Convert all URLs to relative">Relative URLs</a>
          
        </li>
      
        <li>
          
          <a href="/plugins/svg/" title="Using the SVG plugin to optimize SVG files">SVG</a>
          
        </li>
      
        <li>
          
          <a href="/plugins/search/" title="Using the search plugin to sort pages and directories">Search</a>
          
        </li>
      
        <li>
          
          <a href="/plugins/terser/" title="Using the Terser plugin to minify JS files">Terser</a>
          
        </li>
      
        <li>
          
          <a href="/plugins/url/" title="For URL normalization">URL</a>
          
        </li>
      
        <li>
          
          <a href="/plugins/yaml/" title="Using YAML for data and pages">YAML</a>
          
        </li>
      
      </ul>
    </li>
    
    <li>
      <strong>Advanced</strong>
      <ul>
      
        <li>
          
          <a href="/advanced/custom-configuration/" title="Create your own default configuration">Change default configuration</a>
          
        </li>
      
        <li>
          
          <a href="/advanced/plugins/" title="Creating plugins to extend Lume">Creating plugins</a>
          
        </li>
      
        <li>
          
          <a href="/advanced/processors/" title="A guide on extending Lume with custom processors">Custom processors</a>
          
        </li>
      
        <li>
          
          <a href="/advanced/events/" title="A list of all the events which Lume will dispatch in the lifecycle">Events</a>
          
        </li>
      
        <li>
          
          <a href="/advanced/flags/" title="The different flags that can be passed to the Lume CLI">Flags</a>
          
        </li>
      
        <li>
          
          <a href="/advanced/loaders/" title="Small guide on adding custom loaders to Lume">Loaders and engines</a>
          
        </li>
      
        <li>
          
          <a href="/advanced/multiple-template-engines/" title="Overriding the behavior of a template engine">Multiple template engines</a>
          
        </li>
      
        <li>
          
          <a href="/advanced/render-order/" aria-current="page" title="Configure the rendering order of the pages">Render order</a>
          
        </li>
      
        <li>
          
          <a href="/advanced/scripts/" title="A guide on using Lume as a script runner">Scripts</a>
          
        </li>
      
      </ul>
    </li>
    
  </ul>
</nav>

<main class="article ly-content">
  
  <header class="article-header">
    <p>Advanced</p>
    <h1>Render order</h1>
  </header>
  

  <div class="article-content">
    <p>In lume all pages are rendered at the same time. This works well in most cases,
but sometimes you want to make sure a page is rendered after or before others.
The most typical example is with auto-generated pages. Let's say you have a page
that generate multiple pages dynammically using data from an external API:</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> layout = <span class="hljs-string">"layouts/api.njk"</span>;

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"https://my-api.com/data.json"</span>);
<span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span>* () {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> data.<span class="hljs-property">items</span>) {
    <span class="hljs-keyword">yield</span> {
      <span class="hljs-attr">url</span>: <span class="hljs-string">`item-<span class="hljs-subst">${item.id}</span>`</span>,
      <span class="hljs-attr">title</span>: item.<span class="hljs-property">title</span>,
      <span class="hljs-attr">tags</span>: [<span class="hljs-string">"api-item"</span>],
      <span class="hljs-attr">content</span>: item.<span class="hljs-property">text</span>,
    };
  }
}
</code></pre>
<p>This script will generate one page for every item returned by the api. To list
and paginate all these auto-generated pages, you may want to create an
additional page like this:</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> layout = <span class="hljs-string">"layouts/api-pagination.njk"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span>* ({ search, paginate }) {
  <span class="hljs-keyword">const</span> items = search.<span class="hljs-title function_">pages</span>(<span class="hljs-string">"api-item"</span>);

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> page <span class="hljs-keyword">of</span> <span class="hljs-title function_">paginate</span>(items, { <span class="hljs-attr">url</span>: <span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> <span class="hljs-string">`/page/<span class="hljs-subst">${n}</span>/`</span>, <span class="hljs-attr">size</span>: <span class="hljs-number">10</span> })) {
    <span class="hljs-keyword">yield</span> page;
  }
}
</code></pre>
<p>In this script, we are using the <a href="/creating-pages/searching/">search</a> helper to
search all pages tagged as <code>api-item</code> (we have added this tag to the previous
pages generated automatically) and paginate them with the
<a href="/creating-pages/pagination/">paginate</a> helper. But we have a problem: due all
pages are executed at the same time, it's possible that the <code>api-item</code> pages
didn't exist before paginate them, so the pagination won't work. What we really
need is create all dynamic pages <strong>before</strong> paginate them.</p>
<p>To control this, lume has the <code>renderOrder</code> variable, to configure the order in
which every page will be rendered. By default this value is <code>0</code>, so if you
change it to a negative value (like <code>-1</code>, <code>-2</code> etc) the page will be rendered
<strong>before</strong> the others, and changing to a positive value (<code>1</code>, <code>2</code>, etc) the page
will be rendered <strong>after</strong>. So, to fix our example, the solution could be to
change the <code>renderOrder</code> of the pagination script to a value greater than 0, for
example, <code>1</code>:</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> layout = <span class="hljs-string">"layouts/api-pagination.njk"</span>;

<span class="hljs-comment">// Changed this to render this page after the others</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> renderOrder = <span class="hljs-number">1</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span>* ({ search, paginate }) {
  <span class="hljs-keyword">const</span> items = search.<span class="hljs-title function_">pages</span>(<span class="hljs-string">"api-item"</span>);

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> page <span class="hljs-keyword">of</span> <span class="hljs-title function_">paginate</span>(items, { <span class="hljs-attr">url</span>: <span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> <span class="hljs-string">`/page/<span class="hljs-subst">${n}</span>/`</span>, <span class="hljs-attr">size</span>: <span class="hljs-number">10</span> })) {
    <span class="hljs-keyword">yield</span> page;
  }
}
</code></pre>
<p>This ensures that this script will be runned <strong>after</strong> all other pages are
created. An alternative solution is change the <code>renderOrder</code> of the API script
to a negative value, like <code>-1</code>.</p>

  </div>

</main>

<footer class="footer ly-footer">
  <ul class="footer-pagination">
    <li>
      ← Previous <a href="/advanced/multiple-template-engines/" rel="prev">Multiple template engines</a>
    </li>
    
    <li>
      Next → <a href="/advanced/scripts/" rel="next">Scripts</a>
    </li>
    
  </ul>

  <p class="footer-credits">
    Created by <a href="https://twitter.com/misteroom">Oscar Otero</a> - 
    <a href="https://github.com/lumeland/lumeland.github.io/edit/master/advanced/render-order.md">Edit this page</a>
  </p>
</footer>

  

</body></html>